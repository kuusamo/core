#!/usr/bin/env php
<?php

use Kuusamo\Vle\Cli\FileTools;

require './vendor/autoload.php';

if ($argc < 2) {
    echo "Kuusamo CLI is working\n";
    die;
}

switch ($argv[1]) {
    case 'assets':
        if (is_link('./public/styles')) {
            unlink('./public/styles');
        }

        if (is_link('./public/js')) {
            unlink('./public/js');
        }

        FileTools::recursiveCopy(__DIR__ . '/../public/styles', './public/styles');
        FileTools::recursiveCopy(__DIR__ . '/../public/js', './public/js');

        FileTools::recursiveCopy(__DIR__ . '/../public/images', './public/images');
        copy(__DIR__ . './../public/.htaccess', './public/.htaccess');
        copy(__DIR__ . './../public/favicon.png', './public/favicon.png');
        copy(__DIR__ . './../public/robots.txt', './public/robots.txt');

        echo "Operation complete!\n";
        break;
    case 'dev-assets':
        FileTools::recursiveDelete('./public/styles');
        FileTools::recursiveDelete('./public/js');
        symlink(__DIR__ . '/../public/styles', './public/styles');
        symlink(__DIR__ . '/../public/js', './public/js');
        echo "Assets are now symlinked\n";
        break;
    default:
        echo "Unknown command\n";
}
